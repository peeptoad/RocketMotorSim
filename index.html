<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket Engine Performance Analyzer</title>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Rocket Engine Performance Analyzer</h1>
    <div>
        <label for="initialPropellantMass">Initial Propellant Mass (grams):</label>
        <select id="initialPropellantMass">
            <!-- Options will be dynamically generated using JavaScript -->
        </select>
    </div>
    <div>
        <label for="initialRocketMass">Total Rocket Weight (grams):</label>
        <select id="initialRocketMass">
            <!-- Options will be dynamically generated using JavaScript -->
        </select>
    </div>
    <div>
        <label for="rocketDiameter">Rocket Diameter (inches):</label>
        <input type="number" id="rocketDiameter">
        <label for="rocketLength">Rocket Length (inches):</label>
        <input type="number" id="rocketLength">
    </div>
    <div>
        <button onclick="simulateRocket()">Simulate Rocket Flight</button>
    </div>
    <div>
        <canvas id="rocketChart" width="800" height="400"></canvas>
    </div>

    <script>
        // Constants
        const g = 9.81; // Acceleration due to gravity (m/s^2)
        const Cd = 0.75; // Drag coefficient
        const airDensity0 = 1.225; // Air density at sea level (kg/m^3)

        // Function to calculate air density at a given altitude
        function calculateAirDensity(altitude) {
            return airDensity0 * Math.exp(-altitude / 8500);
        }

        // Function to calculate drag force
        function calculateDragForce(velocity, altitude) {
            const airDensity = calculateAirDensity(altitude);
            const rocketDiameter = parseFloat(document.getElementById('rocketDiameter').value) * 0.0254; // Convert inches to meters
            const rocketArea = Math.PI * Math.pow((rocketDiameter / 2), 2); // Cross-sectional area of the rocket (m^2)
            return 0.5 * Cd * airDensity * Math.pow(velocity, 2) * rocketArea;
        }

        // Function to simulate rocket trajectory using Runge-Kutta 4th order method
        function simulateRocketTrajectory() {
            const initialRocketMass = parseFloat(document.getElementById('initialRocketMass').value) / 1000; // Convert grams to kilograms
            const initialPropellantMass = parseFloat(document.getElementById('initialPropellantMass').value) / 1000; // Convert grams to kilograms
            const totalTime = 60; // Total simulation time (seconds)
            const timeStep = 0.1; // Time step for numerical integration (seconds)

            let time = 0; // Initialize time
            let rocketMass = initialRocketMass + initialPropellantMass; // Total rocket mass (kg)
            let velocity = 0; // Initialize velocity
            let altitude = 0; // Initialize altitude

            // Arrays to store simulation results
            const timeArray = [];
            const altitudeArray = [];
            const velocityArray = [];

            // Perform numerical integration using Runge-Kutta 4th order method
            while (time <= totalTime) {
                // Calculate thrust (assuming constant thrust for simplicity)
                const thrust = 1000; // Thrust (N)

                // Calculate drag force
                const dragForce = calculateDragForce(velocity, altitude);

                // Calculate net force
                const netForce = thrust - dragForce - (rocketMass * g);

                // Calculate acceleration using net force
                const acceleration = netForce / rocketMass;

                // Update velocity and altitude using Runge-Kutta 4th order method
                const k1v = acceleration;
                const k1h = velocity;

                const k2v = acceleration;
                const k2h = velocity + (timeStep / 2) * k1v;

                const k3v = acceleration;
                const k3h = velocity + (timeStep / 2) * k2v;

                const k4v = acceleration;
                const k4h = velocity + timeStep * k3v;

                velocity += (timeStep / 6) * (k1v + 2 * k2v + 2 * k3v + k4v);
                altitude += (timeStep / 6) * (k1h + 2 * k2h + 2 * k3h + k4h);

                // Update rocket mass (propellant mass decreases over time)
                const propellantMassConsumed = (initialPropellantMass / totalTime) * timeStep;
                rocketMass -= propellantMassConsumed;

                // Store simulation results
                timeArray.push(time);
                altitudeArray.push(altitude);
                velocityArray.push(velocity);

                // Increment time
                time += timeStep;
            }

            return { timeArray, altitudeArray, velocityArray };
        }

        // Function to simulate rocket flight and plot results
        function simulateRocket() {
            // Run simulation
            const { timeArray, altitudeArray, velocityArray } = simulateRocketTrajectory();

            // Plot results
            const ctx = document.getElementById('rocketChart').getContext('2d');
            const rocketChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timeArray,
                    datasets: [{
                        label: 'Altitude (m)',
                        data: altitudeArray,
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Velocity (m/s)',
                        data: velocityArray,
                        borderColor: 'green',
                        backgroundColor: 'rgba(0, 255, 0, 0.1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Time (s)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Altitude (m) / Velocity (m/s)'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>




